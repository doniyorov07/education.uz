<?php  namespace frontend\controllers;use common\models\PracticaQuestion;use common\models\PracticaQuestionAnswer;use dominus77\sweetalert2\Alert;use yii\web\Controller;use common\models\Practica;use yii\data\ActiveDataProvider;use Yii;use yii\data\Pagination;use yii\web\NotFoundHttpException;class PracticaController extends FilterController{    public function actionDetail($id)    {        $they = Practica::findOne($id);        if (!$they){            throw new NotFoundHttpException('Bunday malumot mavjid emas');        }        $question = PracticaQuestion::find()->where(['post_id' => $they->id])->all();        $model = new PracticaQuestion();        $models = new PracticaQuestionAnswer();        if ($they) {            $they->updateCounters(['views_count' => 1]);            $model = new PracticaQuestion([                'post_id' => $they->id,            ]);            $models = new PracticaQuestionAnswer([                'post_id' => $they->id,            ]);            if ($this->request->isPost) {                if ($model->load($this->request->post()) && $model->validate()) {                    $model->uploadImg();                    $model->date = date('Y-m-d');                    $model->user_id = \Yii::$app->user->id;                    $model->save(false);                    Yii::$app->session->setFlash(Alert::TYPE_SUCCESS, [                        'text' => 'Savolingiz muvaffaqiyatli yuborildi!',                        'timer' => 2500                    ]);                    return $this->refresh();                }            } else {                $model->loadDefaultValues();            }            if ($this->request->isPost) {                if ($models->load($this->request->post()) && $models->validate()) {                    $models->date = date('Y-m-d');                    $models->user_id = \Yii::$app->user->id;                    $models->save(false);                    Yii::$app->session->setFlash(Alert::TYPE_SUCCESS, [                        'text' => 'Javobingiz muvaffaqiyatli yuborildi!',                        'timer' => 2500                    ]);                    return $this->refresh();                }            } else {                $models->loadDefaultValues();            }            return $this->render('detail', [                'they' => $they,                'model' => $model,                'models' => $models,                'question' => $question,            ]);        } else {            throw new NotFoundHttpException('No such information exists!');        }    }	public function actionVideo($id)	{		$practica = Practica::findOne($id);        if (!$practica){            throw new NotFoundHttpException('Bunday malumot mavjid emas');        }		if ($practica) {			$practica->updateCounters(['views_count' => 1]);		return $this->render('video',[			'practica' => $practica		]);		}		else{			echo '<h2 style="color:   rgb(51, 204, 255); text-align:center; font-size: 50px; margin-top: 250px">403</h2>            <h1 style="color: red; text-align:center; font-size: 50px; padding: px">Forbidden</h1>';		}	}		public function actionIndex()	{		$query = Practica::find();		        $dataProvider = new ActiveDataProvider([            'query' => $query,        ]);        $count = $query->count();        $pages = new Pagination([        	"totalCount" => $count        ]);        $pages->pageSize = 6;        $prac = $query->offset($pages->offset)->limit($pages->limit)->all();         return $this->render('index', [         'models' => $prac,         'pages' => $pages,    ]);      	}}?>