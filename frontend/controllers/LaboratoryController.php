<?php  namespace frontend\controllers;use common\models\LaboratoryQuestion;use common\models\LaboratoryQuestionAnswer;use Yii;use dominus77\sweetalert2\Alert;use yii\web\Controller;use common\models\Laboratory;use yii\data\Pagination;use yii\web\NotFoundHttpException;class LaboratoryController extends Controller{    public function actionDetail($id)    {        $they = Laboratory::findOne($id);        if (!$they){            throw new NotFoundHttpException('Bunday malumot mavjid emas');        }        $question = LaboratoryQuestion::find()->where(['post_id' => $they->id])->all();        $model = new LaboratoryQuestion();        $models = new LaboratoryQuestionAnswer();        if ($they) {            $they->updateCounters(['views_count' => 1]);            $model = new LaboratoryQuestion([                'post_id' => $they->id,            ]);            $models = new LaboratoryQuestionAnswer([                'post_id' => $they->id,            ]);            if ($this->request->isPost) {                if ($model->load($this->request->post()) && $model->validate()) {                    $model->uploadImg();                    $model->date = date('Y-m-d');                    $model->user_id = \Yii::$app->user->id;                    $model->save(false);                    Yii::$app->session->setFlash(Alert::TYPE_SUCCESS, [                        'text' => 'Savolingiz muvaffaqiyatli yuborildi!',                        'timer' => 2500                    ]);                    return $this->refresh();                }            } else {                $model->loadDefaultValues();            }            if ($this->request->isPost) {                if ($models->load($this->request->post()) && $models->validate()) {                    $models->date = date('Y-m-d');                    $models->user_id = \Yii::$app->user->id;                    $models->save(false);                    Yii::$app->session->setFlash(Alert::TYPE_SUCCESS, [                        'text' => 'Javobingiz muvaffaqiyatli yuborildi!',                        'timer' => 2500                    ]);                    return $this->refresh();                }            } else {                $models->loadDefaultValues();            }            return $this->render('detail', [                'they' => $they,                'model' => $model,                'models' => $models,                'question' => $question,            ]);        } else {            throw new NotFoundHttpException('No such information exists!');        }    }    public function actionIndex()	{		$query = Laboratory::find();        $count = $query->count();        $pages = new Pagination([        	"totalCount" => $count        ]);        $pages->pageSize = 6;        $laboratory = $query->offset($pages->offset)->limit($pages->limit)->all();         return $this->render('index', [         'models' => $laboratory,         'pages' => $pages,             ]);	}}?>