<?php  namespace frontend\controllers;use common\models\TheoryQuestion;use common\models\TheoryQuestionAnswer;use yii\web\Controller;use common\models\Theory;use yii\data\Pagination;use yii\web\NotFoundHttpException;use dominus77\sweetalert2\Alert;use Yii;class TheoryController extends Controller{    public function actionDetail($id)    {        $they = Theory::findOne($id);        if (!$they){            throw new NotFoundHttpException('Bunday malumot mavjid emas');        }        $question = TheoryQuestion::find()->where(['post_id' => $they->id])->all();        $model = new TheoryQuestion();        $models = new TheoryQuestionAnswer();        if ($they) {            $they->updateCounters(['views_count' => 1]);            $model = new TheoryQuestion([                'post_id' => $they->id,            ]);            $models = new TheoryQuestionAnswer([                'post_id' => $they->id,            ]);            if ($this->request->isPost) {                if ($model->load($this->request->post()) && $model->validate()) {                    $model->uploadImg();                    $model->date = date('Y-m-d');                    $model->user_id = \Yii::$app->user->id;                    $model->save(false);                    Yii::$app->session->setFlash(Alert::TYPE_SUCCESS, [                        'text' => 'Savolingiz muvaffaqiyatli yuborildi!',                        'timer' => 2500                    ]);                    return $this->refresh();                }            } else {                $model->loadDefaultValues();            }            if ($this->request->isPost) {                if ($models->load($this->request->post()) && $models->validate()) {                    $models->date = date('Y-m-d');                    $models->user_id = \Yii::$app->user->id;                    $models->save(false);                    Yii::$app->session->setFlash(Alert::TYPE_SUCCESS, [                        'text' => 'Javobingiz muvaffaqiyatli yuborildi!',                        'timer' => 2500                    ]);                    return $this->refresh();                }            } else {                $models->loadDefaultValues();            }            return $this->render('detail', [                'they' => $they,                'model' => $model,                'models' => $models,                'question' => $question,            ]);        } else {            throw new NotFoundHttpException('No such information exists!');        }    }	public function actionIndex()	{        $query = Theory::find();        $count = $query->count();        $pagination = new Pagination([            'totalCount' => $count,            'pageSize' => 6        ]);        $theory = $query->limit($pagination->limit)->offset($pagination->offset)->where(['status' => 1])->all();        return $this->render('index', [            'theory' => $theory,            'pagination' => $pagination,        ]);	}}?>