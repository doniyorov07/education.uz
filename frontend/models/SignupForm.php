<?phpnamespace frontend\models;use common\models\LoginForm;use Yii;use yii\base\Model;use common\models\User;/** * Signup form */class SignupForm extends Model{    public $username;    public $email;    public $password;    /**     * {@inheritdoc}     */    public function rules()    {        return [            ['username', 'trim'],            ['username', 'required', 'message' => 'Login bo\'sh bo\'lishi mumkin emas!'],            ['username', 'unique', 'targetClass' => '\common\models\User', 'message' => 'Bu foydalanuvchi nomi allaqachon mavjud!'],            ['username', 'string', 'min' => 2, 'max' => 255],            ['email', 'trim'],            ['email', 'required', 'message' => 'Email bo\'sh bo\'lishi mumkin emas!'],            ['email', 'email'],            ['email', 'string', 'max' => 255],            ['email', 'unique', 'targetClass' => '\common\models\User', 'message' => 'Bu elektron pochta manzili allaqachon mavjud!'],            ['password', 'required', 'message' => 'Parol bo\'sh bo\'lishi mumkin emas!'],            ['password', 'string', 'min' => Yii::$app->params['user.passwordMinLength']],        ];    }    public function signup()    {        if ($this->validate()) {            $user = new User();            $user->username = $this->username;            $user->email = $this->email;            $user->role = User::ROLE_USER;            $user->setPassword($this->password);            $user->generateAuthKey();            $user->generateEmailVerificationToken();            return $user->save() && $this->sendEmail($user);        }    }    /**     * Sends confirmation email to user     * @param User $user user model to with email should be send     * @return bool whether the email was sent     */    protected function sendEmail($user)    {        return Yii::$app            ->mailer            ->compose(                ['html' => 'emailVerify-html', 'text' => 'emailVerify-text'],                ['user' => $user]            )            ->setFrom([Yii::$app->params['adminEmail'] => Yii::$app->name . ' robot'])            ->setTo($this->email)            ->setSubject('Account registration at ' . Yii::$app->name)            ->send();    }}